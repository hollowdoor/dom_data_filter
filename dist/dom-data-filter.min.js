!function(e){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n(e){var t=typeof Element;return"object"===t||"function"===t?e instanceof Element:!!e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function r(e,t){if(void 0===t&&(t=document),"string"==typeof e)try{return t.querySelector(e)}catch(e){throw e}if(n(e))return e;if(e&&"object"==typeof e){if(n(e.element))return e.element;if(n(e[0]))return e[0]}throw new TypeError("value ("+e+") in isElement(value)\n    is not an element, valid css selector,\n    or object with an element property, or index 0.")}function i(e,t,n){void 0===n&&(n={});var r=v(t,n);return!e.dispatchEvent(r)}function o(e,t){if(void 0===t)return!0;var n=l(e.element);return t&&"none"===n||!t&&"none"!==n}function a(e,t,n){if(void 0===t){var r=l(e.element);e.element.style.display=n="none"===r?n:"none",t="none"!==n}else e.element.style.display=t?n:"none";return i(e.element,"toggled",{bubbles:!1}),t}function l(e){return e.style.display?e.style.display:window.getComputedStyle(e,null).display}var s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var r,i,o=arguments,a=t(e),l=1;l<arguments.length;l++){r=Object(o[l]);for(var h in r)u.call(r,h)&&(a[h]=r[h]);if(s){i=s(r);for(var f=0;f<i.length;f++)c.call(r,i[f])&&(a[i[f]]=r[i[f]])}}return a},f=function(){this.tree={branches:{},items:[]}};f.prototype.empty=function(){this.tree={branches:{},items:[]}},f.prototype.push=function(){for(var e=arguments,t=this,n=[],r=arguments.length;r--;)n[r]=e[r];n.forEach(function(e){var n=t.tree;e.split("").forEach(function(t){var r=t.toLowerCase();(n=n.branches[r]=n.branches[r]||Object.create(null)).branches=n.branches||Object.create(null),n.items=n.items||[],n.items.push(e),n.value=t}),n.leaf=!0})},f.prototype.remove=function(){for(var e=arguments,t=this,n=[],r=arguments.length;r--;)n[r]=e[r];n.forEach(function(e){for(var n,r=t.tree,i=e.split(""),o=0;o<i.length;o++){var a=i[o].toLowerCase(),l=void 0;if(n=r,void 0===(r=r.branches[a]))break;-1!==(l=r.items.indexOf(e.value))&&(r.items.splice(l,1),r.items.length?r=r.branches[a]:delete n.branches[a])}})},f.prototype.match=function(e){var t,n=e.split("").map(function(e){return e.toLowerCase()}),r=this.tree,i=n.length+1,o="";if(!n.length)return{tree:null,string:o,value:e};for(var a=0;a<i;a++){if(t=r,!(r=r.branches[n[a]])){void 0!==n[a]&&(t=null);break}o+=r.value}return{tree:t,string:o,value:e}},f.prototype.findAll=function(e){var t=this.match(e).tree;return t?[].concat(t.items):[]},f.prototype.nextPhrase=function(e,t){var n=this.match(e),r=n.tree,i=n.string,o=function(e){if(e.leaf)return i;Object.keys(e.branches);for(var n in e.branches)return t.test(n)?i+n:(i+=e.branches[n].value,o(e.branches[n]))};return o(r)};var v=function(){try{return new Event("nothing"),function(e,t){return new Event(e,t)}}catch(e){}return function(e,t){var n=document.createEvent("Event");return n.initEvent(e,t.bubbles,t.cancelable),n}}(),p=function(e,t){void 0===t&&(t={});var n=t.value;void 0===n&&(n="");var i=t.display;void 0===i&&(i="block");var o=t.read;void 0===o&&(o=null);var a=t.toggle;void 0===a&&(a=null);var l=t.autoToggle;void 0===l&&(l=!0);var s=t.render;if(void 0===s&&(s=function(e){return e+""}),this.element=r(e),this.value=n,this.autoToggle=l,this.initCharTree(),this.initToggle({display:i,toggle:a}),l&&this.toggleDisplay(this.element.children.length),this._read="function"==typeof o?function(){return Promise.resolve(o.call(this))}:function(){return Promise.resolve()},"function"!=typeof s)throw new TypeError(s+" is not a function.");this._render=s};p.prototype.update=function(e){var t=this;return this._read().then(function(){var n=t.element,r=t.findAll(e);return t.value=e,n.innerHTML="",r.forEach(function(e){var r=t._render(e);n.insertAdjacentHTML("beforeend",r)}),t.autoToggle?t.toggle(r.length).then(function(){return r}):r})},p.prototype.readNext=function(e,t){var n=this;return this.update(e).then(function(r){return n.nextPhrase(e,t).then(function(e){return n.value=e})})},function(e){h(e,{nextPhrase:function(e,t){return this.charTree.nextPhrase(e,t)},match:function(e){return void 0===e&&(e=""),this.charTree.match(e)},findAll:function(e){return this.charTree.findAll(e)},push:function(){for(var e=arguments,t=this,n=[],r=arguments.length;r--;)n[r]=e[r];return n.forEach(function(e){t.charTree.push(e)}),this},pushAll:function(e){(t=this.charTree).push.apply(t,e);var t},empty:function(){return this.charTree.empty(),this},initCharTree:function(){return this.charTree=new f}})}(p.prototype),function(e){e.initToggle=function(e){void 0===e&&(e={});var t=e.toggle;void 0===t&&(t=null);var n=e.display;void 0===n&&(n="block");var i=e.element;void 0===i&&(i=null),this._toggle=t,this._display=n,i&&(this.element=r(i))},e.toggleDisplay=function(e){return a(this,e,this._display)},e.toggle=function(e){var t=this;return o(this,e)?i(this.element,"beforetoggled",{bubbles:!1,cancelable:!0})?Promise.resolve("none"!==l(this.element)):this._toggle?Promise.resolve(this._toggle.call(this,!!e)).then(function(){return t.toggleDisplay(e)}):Promise.resolve(this.toggleDisplay(e)):Promise.resolve("none"!==l(this.element))}}(p.prototype),e.DataFilter=p}(this.domDataFilter=this.domDataFilter||{});
//# sourceMappingURL=dom-data-filter.min.js.map
